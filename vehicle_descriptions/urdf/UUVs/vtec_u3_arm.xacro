<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

<!--
    Note: mimic tags should be checked if open/close operation of the gripper is desired
-->

  <xacro:macro name="vtec_u3_arm" params="parent">
    <xacro:property name="arm_origin_x" value="0"/>
    <xacro:property name="arm_origin_y" value="0"/>
    <xacro:property name="arm_origin_z" value="-0.17"/>

    <gazebo reference="arm_rail_link">
        <material>Gazebo/White</material>
        <turnGravityOff>true</turnGravityOff>
        <selfCollide>false</selfCollide>
    </gazebo>

    <gazebo reference="extendible_arm_link">
        <material>Gazebo/White</material>
        <turnGravityOff>true</turnGravityOff>
        <selfCollide>false</selfCollide>
    </gazebo>

    <gazebo reference="left_beam_link">
        <material>Gazebo/White</material>
        <turnGravityOff>true</turnGravityOff>
        <selfCollide>false</selfCollide>
    </gazebo>
    
    <gazebo reference="right_beam_link">
        <material>Gazebo/White</material>
        <turnGravityOff>true</turnGravityOff>
        <selfCollide>false</selfCollide>
    </gazebo>
    
    <gazebo reference="left_tip_link">
        <material>Gazebo/White</material>
        <turnGravityOff>true</turnGravityOff>
        <selfCollide>false</selfCollide>
        <!-- <kp>1000000.0</kp>
        <kd>1.5</kd>
        <mu1>1.5</mu1>
        <mu2>1.5</mu2>
        <minDepth>0.0001</minDepth> -->
    </gazebo>
    
    <gazebo reference="right_tip_link">
        <material>Gazebo/White</material>
        <turnGravityOff>true</turnGravityOff>
        <selfCollide>false</selfCollide>
        <!-- <kp>1000000.0</kp>
        <kd>1.5</kd>
        <mu1>1.5</mu1>
        <mu2>1.5</mu2>
        <minDepth>0.0001</minDepth> -->
    </gazebo>

    <joint name="${parent}_base_link_2_arm_rail_link_joint" type="fixed">
      <origin xyz="${arm_origin_x} ${arm_origin_y} ${arm_origin_z}" rpy="0 0 0"/>
      <parent link="${parent}_base_link"/>
      <child link="arm_rail_link"/>
    </joint>

    <link name= "arm_rail_link">
      <visual>
        <origin xyz="0 0 0" rpi="0 0 0"/>
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/arm_rail.stl" />
        </geometry>
      </visual>
      <!-- Leave commented. This makes the whole arm to move -->
      <!-- <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/arm_rail.stl" />
        </geometry>
      </collision> -->
      <inertial>
        <origin xyz="-0.000143143841055618 0.0093355201368952 0.0425505188622381" rpy="0 0 0" />
        <mass value="0.214808103264679" />
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>

    <joint name="arm_rail_link_2_extendible_arm_link_joint" type="prismatic">
      <axis xyz="0 0 1" />
      <limit effort="1000.0" lower="-0.09" upper="0.12" velocity="0.001" />
      <origin xyz="0.15257 -0.00014633 0.003" rpy="1.5708 0 1.5708" />
      <parent link="arm_rail_link" />
      <child link="extendible_arm_link" />
    </joint>

    <link name ="extendible_arm_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/extendible_arm.stl" />
        </geometry>
      </visual>
      <!-- <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/extendible_arm.stl" />
        </geometry>
      </collision> -->
      <inertial>
        <origin xyz="0.00011792 0.019454 -0.085978" rpy="0 0 0" />
        <mass value="0.14" />
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>

    <joint name="extendible_arm_link_2_left_beam_link_joint" type="revolute">
      <axis xyz="0 1 0" />
      <limit lower="0" upper="1" effort="100" velocity="0.001" />
      <origin xyz="0.025315 0.0212 0.078512" rpy="0 -0.13439 0" />
      <parent link="extendible_arm_link" />
      <child link="left_beam_link" />
    </joint>

    <link name="left_beam_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/left_beam.stl" />
        </geometry>
      </visual>
      <!-- <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/left_beam.stl" />
        </geometry>
      </collision> -->
      <inertial>
        <origin xyz="-0.0054587 -0.0045 0.020602" rpy="0 0 0" />
        <mass value="0.0028443" />
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>
    
    <joint name="left_beam_link_2_left_tip_link_joint" type="revolute">
      <axis xyz="0 1 0" />
      <limit lower="-1" upper="0" effort="100" velocity="0.001" />
      <origin xyz="0 -0.002 0.04" rpy="0 0.10761 0" />
      <parent link="left_beam_link" />
      <child link="left_tip_link" />
      <mimic joint="extendible_arm_link_2_left_beam_link" multiplier="-1" offset="0" />
    </joint>

    <link name="left_tip_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/left_tip.stl" />
        </geometry>
      </visual>
      <!-- <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/left_tip.stl" />
        </geometry>
      </collision> -->
      <inertial>
        <origin xyz="-0.010353 -0.0025 0.013922" rpy="0 0 0" />
        <mass value="0.0028494" />
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>

    <joint name="extendible_arm_link_2_right_beam_link_joint" type="revolute">
      <axis xyz="0 1 0" />
      <limit lower="-1" upper="0" effort="100" velocity="0.001" />
      <origin xyz="-0.025315 0.0212 0.078512" rpy="0 0.13167 0" />
      <parent link="extendible_arm_link" />
      <child link="right_beam_link" />
      <mimic joint="extendible_arm_link_2_left_beam_link" multiplier="-1" offset="0" />
    </joint>

    <link name="right_beam_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/right_beam.stl" />
        </geometry>
      </visual>
      <!-- <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/right_beam.stl" />
        </geometry>
      </collision> -->
      <inertial>
        <origin xyz="0.0054603 -0.0045 0.020616" rpy="0 0 0" />
        <mass value="0.0028443" />
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>
    
    <joint name="right_beam_link_2_right_tip_link_joint" type="revolute">
      <axis xyz="0 1 0" />
      <limit lower="0" upper="1" effort="100" velocity="0.001" />
      <origin xyz="0 -0.002 0.04" rpy="0 -0.10535 0" />
      <parent link="right_beam_link" />
      <child link="right_tip_link" />
      <mimic joint="extendible_arm_link_2_right_beam_link" multiplier="-1" offset="0" />
    </joint>
    
    <link name="right_tip_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/right_tip.stl" />
        </geometry>
      </visual>
      <!-- <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://vehicle_descriptions/meshes/arm/right_tip.stl" />
        </geometry>
      </collision> -->
      <inertial>
        <origin xyz="0.010353 -0.0025 0.013922" rpy="0 0 0" />
        <mass value="0.0028494" />
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001" />
      </inertial>
    </link>

  </xacro:macro>

</robot>